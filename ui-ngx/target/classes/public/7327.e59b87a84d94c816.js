(self.webpackChunkthingsboard=self.webpackChunkthingsboard||[]).push([[7327],{97327:()=>{var S,F,G,V;S=jQuery,F=10,G=.95,V={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(p,N){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+N.color+";'>"+p+"<br/>"+Math.round(N.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}},S.plot.plugins.push({init:function U(p){var N=null,m=null,r=null,d=null,g=null,I=null,C=!1,a=null,w=[];function W(e){if(r.series.pie.innerRadius>0){e.save();var i=r.series.pie.innerRadius>1?r.series.pie.innerRadius:d*r.series.pie.innerRadius;e.globalCompositeOperation="destination-out",e.beginPath(),e.fillStyle=r.series.pie.stroke.color,e.arc(0,0,i,0,2*Math.PI,!1),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),e.strokeStyle=r.series.pie.stroke.color,e.arc(0,0,i,0,2*Math.PI,!1),e.stroke(),e.closePath(),e.restore()}}function ee(e,i){for(var t=!1,h=-1,f=e.length,o=f-1;++h<f;o=h)(e[h][1]<=i[1]&&i[1]<e[o][1]||e[o][1]<=i[1]&&i[1]<e[h][1])&&i[0]<(e[o][0]-e[h][0])*(i[1]-e[h][1])/(e[o][1]-e[h][1])+e[h][0]&&(t=!t);return t}function re(e){B("plothover",e)}function se(e){B("plotclick",e)}function B(e,i){var t=p.offset(),o=function ie(e,i){for(var o,s,t=p.getData(),h=p.getOptions(),f=h.series.pie.radius>1?h.series.pie.radius:d*h.series.pie.radius,n=0;n<t.length;++n){var l=t[n];if(l.pie.show){if(a.save(),a.beginPath(),a.moveTo(0,0),a.arc(0,0,f,l.startAngle,l.startAngle+l.angle/2,!1),a.arc(0,0,f,l.startAngle+l.angle/2,l.startAngle+l.angle,!1),a.closePath(),o=e-g,s=i-I,a.isPointInPath){if(a.isPointInPath(e-g,i-I))return a.restore(),{datapoint:[l.percent,l.data],dataIndex:0,series:l,seriesIndex:n}}else if(ee([[0,0],[f*Math.cos(l.startAngle),f*Math.sin(l.startAngle)],[f*Math.cos(l.startAngle+l.angle/4),f*Math.sin(l.startAngle+l.angle/4)],[f*Math.cos(l.startAngle+l.angle/2),f*Math.sin(l.startAngle+l.angle/2)],[f*Math.cos(l.startAngle+l.angle/1.5),f*Math.sin(l.startAngle+l.angle/1.5)],[f*Math.cos(l.startAngle+l.angle),f*Math.sin(l.startAngle+l.angle)]],[o,s]))return a.restore(),{datapoint:[l.percent,l.data],dataIndex:0,series:l,seriesIndex:n};a.restore()}}return null}(parseInt(i.pageX-t.left,10),parseInt(i.pageY-t.top,10));if(r.grid.autoHighlight)for(var s=0;s<w.length;++s){var n=w[s];n.auto===e&&(!o||n.series!==o.series)&&te(n.series)}o&&function ae(e,i){var t=X(e);-1===t?(w.push({series:e,auto:i}),p.triggerRedrawOverlay()):i||(w[t].auto=!1)}(o.series,e);var l={pageX:i.pageX,pageY:i.pageY};m.trigger(e,[l,o])}function te(e){null==e&&(w=[],p.triggerRedrawOverlay());var i=X(e);-1!==i&&(w.splice(i,1),p.triggerRedrawOverlay())}function X(e){for(var i=0;i<w.length;++i)if(w[i].series===e)return i;return-1}p.hooks.processOptions.push(function(e,i){i.series.pie.show&&(i.grid.show=!1,"auto"===i.series.pie.label.show&&(i.legend.show?i.series.pie.label.show=!1:i.series.pie.label.show=!0),"auto"===i.series.pie.radius&&(i.series.pie.label.show?i.series.pie.radius=3/4:i.series.pie.radius=1),i.series.pie.tilt>1?i.series.pie.tilt=1:i.series.pie.tilt<0&&(i.series.pie.tilt=0))}),p.hooks.bindEvents.push(function(e,i){var t=e.getOptions();t.series.pie.show&&(t.grid.hoverable&&i.unbind("mousemove").mousemove(re),t.grid.clickable&&i.unbind("click").click(se))}),p.hooks.processDatapoints.push(function(e,i,t,h){e.getOptions().series.pie.show&&function Z(e){C||(C=!0,N=e.getCanvas(),m=S(N).parent(),r=e.getOptions(),e.setData(function j(e){var s,n,i=0,t=0,h=0,f=r.series.pie.combine.color,o=[];for(s=0;s<e.length;++s)n=e[s].data,S.isArray(n)&&1===n.length&&(n=n[0]),S.isArray(n)?!isNaN(parseFloat(n[1]))&&isFinite(n[1])?n[1]=+n[1]:n[1]=0:n=!isNaN(parseFloat(n))&&isFinite(n)?[1,+n]:[1,0],e[s].data=[n];for(s=0;s<e.length;++s)i+=e[s].data[0][1];for(s=0;s<e.length;++s)(n=e[s].data[0][1])/i<=r.series.pie.combine.threshold&&(t+=n,h++,f||(f=e[s].color));for(s=0;s<e.length;++s)n=e[s].data[0][1],(h<2||n/i>r.series.pie.combine.threshold)&&o.push(S.extend(e[s],{data:[[1,n]],color:e[s].color,label:e[s].label,angle:n*Math.PI*2/i,percent:n/(i/100)}));return h>1&&o.push({data:[[1,t]],color:f,label:r.series.pie.combine.label,angle:t*Math.PI*2/i,percent:t/(i/100)}),o}(e.getData())))}(e)}),p.hooks.drawOverlay.push(function(e,i){e.getOptions().series.pie.show&&function ne(e,i){var t=e.getOptions(),h=t.series.pie.radius>1?t.series.pie.radius:d*t.series.pie.radius;i.save(),i.translate(g,I),i.scale(1,t.series.pie.tilt);for(var f=0;f<w.length;++f)o(w[f].series);function o(s){s.angle<=0||isNaN(s.angle)||(i.fillStyle="rgba(255, 255, 255, "+t.series.pie.highlight.opacity+")",i.beginPath(),Math.abs(s.angle-2*Math.PI)>1e-9&&i.moveTo(0,0),i.arc(0,0,h,s.startAngle,s.startAngle+s.angle/2,!1),i.arc(0,0,h,s.startAngle+s.angle/2,s.startAngle+s.angle,!1),i.closePath(),i.fill())}W(i),i.restore()}(e,i)}),p.hooks.draw.push(function(e,i){e.getOptions().series.pie.show&&function $(e,i){if(m){var t=e.getPlaceholder().width(),h=e.getPlaceholder().height(),f=m.children().filter(".legend").children().width()||0;a=i,C=!1,d=Math.min(t,h/r.series.pie.tilt)/2,I=h/2+r.series.pie.offset.top,g=t/2,"auto"===r.series.pie.offset.left?(r.legend.position.match("w")?g+=f/2:g-=f/2,g<d?g=d:g>t-d&&(g=t-d)):g+=r.series.pie.offset.left;var o=e.getData(),s=0;do{s>0&&(d*=G),s+=1,n(),r.series.pie.tilt<=.8&&l()}while(!H()&&s<F);s>=F&&(n(),"object"==typeof console&&"function"==typeof console.warn&&console.warn("Could not draw pie with labels contained inside canvas")),e.setSeries&&e.insertLegend&&(e.setSeries(o),e.insertLegend())}function n(){a.clearRect(0,0,t,h),m.children().filter(".pieLabel, .pieLabelBackground").remove()}function l(){var P=r.series.pie.shadow.left,O=r.series.pie.shadow.top,u=10,b=r.series.pie.shadow.alpha,k=r.series.pie.radius>1?r.series.pie.radius:d*r.series.pie.radius;if(!(k>=t/2-P||k*r.series.pie.tilt>=h/2-O||k<=u)){a.save(),a.translate(P,O),a.globalAlpha=b,a.fillStyle="#000",a.translate(g,I),a.scale(1,r.series.pie.tilt);for(var R=1;R<=u;R++)a.beginPath(),a.arc(0,0,k,0,2*Math.PI,!1),a.fill(),k-=R;a.restore()}}function H(){var u,P=Math.PI*r.series.pie.startAngle,O=r.series.pie.radius>1?r.series.pie.radius:d*r.series.pie.radius;a.save(),a.translate(g,I),a.scale(1,r.series.pie.tilt),a.save();var b=P;for(u=0;u<o.length;++u)o[u].startAngle=b,k(o[u].angle,o[u].color,!0);if(a.restore(),r.series.pie.stroke.width>0){for(a.save(),a.lineWidth=r.series.pie.stroke.width,b=P,u=0;u<o.length;++u)k(o[u].angle,r.series.pie.stroke.color,!1);a.restore()}return W(a),a.restore(),!r.series.pie.label.show||R();function k(c,L,v){c<=0||isNaN(c)||(v?a.fillStyle=L:(a.strokeStyle=L,a.lineJoin="round"),a.beginPath(),Math.abs(c-2*Math.PI)>1e-9&&a.moveTo(0,0),a.arc(0,0,O,b,b+c/2,!1),a.arc(0,0,O,b+c/2,b+c,!1),a.closePath(),b+=c,v?a.fill():a.stroke())}function R(){for(var c=P,L=r.series.pie.label.radius>1?r.series.pie.label.radius:d*r.series.pie.label.radius,v=0;v<o.length;++v){if(o[v].percent>=100*r.series.pie.label.threshold&&!y(o[v],c,v))return!1;c+=o[v].angle}return!0;function y(A,Y,_){if(0===A.data[0][1])return!0;var D,z=r.legend.labelFormatter,J=r.series.pie.label.formatter;D=z?z(A.label,A):A.label,J&&(D=J(D,A));var K=(Y+A.angle+Y)/2,Q=g+Math.round(Math.cos(K)*L),q=I+Math.round(Math.sin(K)*L)*r.series.pie.tilt,le="<span class='pieLabel' id='pieLabel"+_+"' style='position:absolute;top:"+q+"px;left:"+Q+"px;'>"+D+"</span>";m.append(le);var M=m.children("#pieLabel"+_),T=q-M.height()/2,x=Q-M.width()/2;if(M.css("top",T),M.css("left",x),0-T>0||0-x>0||h-(T+M.height())<0||t-(x+M.width())<0)return!1;if(0!==r.series.pie.label.background.opacity){var E=r.series.pie.label.background.color;null==E&&(E=A.color);var oe="top:"+T+"px;left:"+x+"px;";S("<div class='pieLabelBackground' style='position:absolute;width:"+M.width()+"px;height:"+M.height()+"px;"+oe+"background-color:"+E+";'></div>").css("opacity",r.series.pie.label.background.opacity).insertBefore(M)}return!0}}}}(e,i)})},options:V,name:"pie",version:"1.1"})}}]);